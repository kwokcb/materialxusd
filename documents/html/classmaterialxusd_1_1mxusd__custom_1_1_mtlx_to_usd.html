<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MaterialXUSD: materialxusd.mxusd_custom.MtlxToUsd Class Reference</title>
<link rel="icon" href="toon_sphere.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- Font Awesome CDN -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="MX_LAB.svg" style="width: 48px"/></td>
  <td id="projectalign">
   <div id="projectname">MaterialXUSD<span id="projectnumber">&#160;0.0.1</span>
   </div>
   <div id="projectbrief">Utilities for using MaterialX with USD</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classmaterialxusd_1_1mxusd__custom_1_1_mtlx_to_usd.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classmaterialxusd_1_1mxusd__custom_1_1_mtlx_to_usd-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">materialxusd.mxusd_custom.MtlxToUsd Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Sample converter from MaterialX to USD.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a90212713fdafb0135a5d2633e560c3b2" id="r_a90212713fdafb0135a5d2633e560c3b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90212713fdafb0135a5d2633e560c3b2">__init__</a> (self, logger=None)</td></tr>
<tr class="memdesc:a90212713fdafb0135a5d2633e560c3b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:a90212713fdafb0135a5d2633e560c3b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d9d84b6b61c55141be13188aff26a6f" id="r_a9d9d84b6b61c55141be13188aff26a6f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d9d84b6b61c55141be13188aff26a6f">log</a> (self, msg, level=0)</td></tr>
<tr class="memdesc:a9d9d84b6b61c55141be13188aff26a6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log a message.  <br /></td></tr>
<tr class="separator:a9d9d84b6b61c55141be13188aff26a6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6306be42de0dc6df4e7271534f2622a" id="r_ad6306be42de0dc6df4e7271534f2622a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6306be42de0dc6df4e7271534f2622a">get_usd_types</a> (self)</td></tr>
<tr class="memdesc:ad6306be42de0dc6df4e7271534f2622a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a list of USD Sdf value type names.  <br /></td></tr>
<tr class="separator:ad6306be42de0dc6df4e7271534f2622a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0266cb1877666900376eac212a5af870" id="r_a0266cb1877666900376eac212a5af870"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0266cb1877666900376eac212a5af870">map_mtlx_to_usd_type</a> (self, str mtlx_type)</td></tr>
<tr class="memdesc:a0266cb1877666900376eac212a5af870"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map a MaterialX type to a USD Sdf type.The mapping is easier from MaterialX as the number of type variations is much less.  <br /></td></tr>
<tr class="separator:a0266cb1877666900376eac212a5af870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a8f74484528ffa9d71c13d55881e815" id="r_a9a8f74484528ffa9d71c13d55881e815"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9a8f74484528ffa9d71c13d55881e815">map_mtlx_to_usd_value</a> (self, mtlx_type, mtlx_value)</td></tr>
<tr class="memdesc:a9a8f74484528ffa9d71c13d55881e815"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map a MaterialX value of a given type to a USD value.  <br /></td></tr>
<tr class="separator:a9a8f74484528ffa9d71c13d55881e815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f51a226dbdfc283b558b92a14cb2835" id="r_a8f51a226dbdfc283b558b92a14cb2835"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f51a226dbdfc283b558b92a14cb2835">map_mtlx_to_usd_shader_notation</a> (self, name)</td></tr>
<tr class="memdesc:a8f51a226dbdfc283b558b92a14cb2835"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility to map from MaterialX shader notation to USD notation.  <br /></td></tr>
<tr class="separator:a8f51a226dbdfc283b558b92a14cb2835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4866b235b08b37a652ea95682816744d" id="r_a4866b235b08b37a652ea95682816744d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4866b235b08b37a652ea95682816744d">emit_usd_connections</a> (self, node, stage, root_path)</td></tr>
<tr class="memdesc:a4866b235b08b37a652ea95682816744d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emit connections between MaterialX elements as USD connections for a given MaterialX node.  <br /></td></tr>
<tr class="separator:a4866b235b08b37a652ea95682816744d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac82506a7654c7f125c26ef93382a6391" id="r_ac82506a7654c7f125c26ef93382a6391"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac82506a7654c7f125c26ef93382a6391">emit_usd_value_elements</a> (self, node, usd_node, emit_all_value_elements)</td></tr>
<tr class="memdesc:ac82506a7654c7f125c26ef93382a6391"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emit MaterialX value elements in USD.  <br /></td></tr>
<tr class="separator:ac82506a7654c7f125c26ef93382a6391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeac4b76efac87dc1e1dab6e0c520ada" id="r_abeac4b76efac87dc1e1dab6e0c520ada"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abeac4b76efac87dc1e1dab6e0c520ada">emit_usd_shader_graph</a> (self, doc, stage, mtlx_nodes, emit_all_value_elements, root=&quot;/MaterialX/Materials/&quot;)</td></tr>
<tr class="memdesc:abeac4b76efac87dc1e1dab6e0c520ada"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emit USD shader graph to a given stage from a list of MaterialX nodes.  <br /></td></tr>
<tr class="separator:abeac4b76efac87dc1e1dab6e0c520ada"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f3534fa3ccc70fae5984795b5ae406b" id="r_a1f3534fa3ccc70fae5984795b5ae406b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f3534fa3ccc70fae5984795b5ae406b">find_materialx_nodes</a> (self, doc)</td></tr>
<tr class="memdesc:a1f3534fa3ccc70fae5984795b5ae406b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find all nodes in a MaterialX document.  <br /></td></tr>
<tr class="separator:a1f3534fa3ccc70fae5984795b5ae406b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a278333f62848ad93b7dad62d0db0405c" id="r_a278333f62848ad93b7dad62d0db0405c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a278333f62848ad93b7dad62d0db0405c">emit_document_metadata</a> (self, doc, stage)</td></tr>
<tr class="memdesc:a278333f62848ad93b7dad62d0db0405c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emit MaterialX document metadata to the USD stage.  <br /></td></tr>
<tr class="separator:a278333f62848ad93b7dad62d0db0405c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f2a696e56aef05c83272163f97ed57" id="r_aa6f2a696e56aef05c83272163f97ed57"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa6f2a696e56aef05c83272163f97ed57">emit</a> (self, mtlx_file_name, emit_all_value_elements)</td></tr>
<tr class="memdesc:aa6f2a696e56aef05c83272163f97ed57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read in a MaterialX file and emit it to a new USD Stage.  <br /></td></tr>
<tr class="separator:aa6f2a696e56aef05c83272163f97ed57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ea989d2035d2cf50e66cab4dce6e961" id="r_a2ea989d2035d2cf50e66cab4dce6e961"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ea989d2035d2cf50e66cab4dce6e961">create_library_document</a> (self)</td></tr>
<tr class="memdesc:a2ea989d2035d2cf50e66cab4dce6e961"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a MaterialX library document.  <br /></td></tr>
<tr class="separator:a2ea989d2035d2cf50e66cab4dce6e961"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a455f0164eb1970163f89cd5c27810174" id="r_a455f0164eb1970163f89cd5c27810174"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a455f0164eb1970163f89cd5c27810174">logger</a> = logger</td></tr>
<tr class="separator:a455f0164eb1970163f89cd5c27810174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d9676089811ab9ad0b3336cf9423e82" id="r_a3d9676089811ab9ad0b3336cf9423e82"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3d9676089811ab9ad0b3336cf9423e82">logger</a> = 1:</td></tr>
<tr class="separator:a3d9676089811ab9ad0b3336cf9423e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Sample converter from MaterialX to USD. </p>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00009">9</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a90212713fdafb0135a5d2633e560c3b2" name="a90212713fdafb0135a5d2633e560c3b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90212713fdafb0135a5d2633e560c3b2">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.__init__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>logger</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">logger</td><td>Logger object. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00013">13</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   13</span>    <span class="keyword">def </span>__init__(self, logger=None):</div>
<div class="line"><span class="lineno">   14</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   15</span><span class="stringliteral">        Constructor.</span></div>
<div class="line"><span class="lineno">   16</span><span class="stringliteral">        @param logger: Logger object.</span></div>
<div class="line"><span class="lineno">   17</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   18</span>        self.logger = logger</div>
<div class="line"><span class="lineno">   19</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2ea989d2035d2cf50e66cab4dce6e961" name="a2ea989d2035d2cf50e66cab4dce6e961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ea989d2035d2cf50e66cab4dce6e961">&#9670;&#160;</a></span>create_library_document()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.create_library_document </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a MaterialX library document. </p>
<dl class="section return"><dt>Returns</dt><dd>: MaterialX library document. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00421">421</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  421</span>    <span class="keyword">def </span>create_library_document(self):</div>
<div class="line"><span class="lineno">  422</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  423</span><span class="stringliteral">        Create a MaterialX library document.</span></div>
<div class="line"><span class="lineno">  424</span><span class="stringliteral">        @return: MaterialX library document.</span></div>
<div class="line"><span class="lineno">  425</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  426</span>        stdlib = mx.createDocument()</div>
<div class="line"><span class="lineno">  427</span>        search_path = mx.getDefaultDataSearchPath()</div>
<div class="line"><span class="lineno">  428</span>        mx.loadLibraries(mx.getDefaultDataLibraryFolders(), search_path, stdlib)</div>
<div class="line"><span class="lineno">  429</span>        <span class="keywordflow">return</span> stdlib</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6f2a696e56aef05c83272163f97ed57" name="aa6f2a696e56aef05c83272163f97ed57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6f2a696e56aef05c83272163f97ed57">&#9670;&#160;</a></span>emit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.emit </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>mtlx_file_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>emit_all_value_elements</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read in a MaterialX file and emit it to a new USD Stage. </p>
<p>Dump results for display and save to usda file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mtlx_file_name</td><td>Name of file containing MaterialX document. Assumed to end in ".mtlx". </td></tr>
    <tr><td class="paramname">emit_all_value_elements</td><td>Emit value elements based on node definition, even if not specified on node instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: USD stage. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00392">392</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  392</span>    <span class="keyword">def </span>emit(self, mtlx_file_name, emit_all_value_elements):</div>
<div class="line"><span class="lineno">  393</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  394</span><span class="stringliteral">        Read in a MaterialX file and emit it to a new USD Stage.</span></div>
<div class="line"><span class="lineno">  395</span><span class="stringliteral">        Dump results for display and save to usda file.</span></div>
<div class="line"><span class="lineno">  396</span><span class="stringliteral">        @param mtlx_file_name: Name of file containing MaterialX document. Assumed to end in &quot;.mtlx&quot;.</span></div>
<div class="line"><span class="lineno">  397</span><span class="stringliteral">        @param emit_all_value_elements: Emit value elements based on node definition, even if not specified on node instance.</span></div>
<div class="line"><span class="lineno">  398</span><span class="stringliteral">        @return: USD stage.</span></div>
<div class="line"><span class="lineno">  399</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  400</span>        stage = Usd.Stage.CreateInMemory()</div>
<div class="line"><span class="lineno">  401</span>        doc = mx.createDocument()</div>
<div class="line"><span class="lineno">  402</span>        mtlx_file_path = mx.FilePath(mtlx_file_name)</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> mtlx_file_path.exists():</div>
<div class="line"><span class="lineno">  405</span>            self.log(f<span class="stringliteral">&quot;Failed to read file: {mtlx_file_path.asString()}&quot;</span>)</div>
<div class="line"><span class="lineno">  406</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>        <span class="comment"># Find nodes to transform before importing the definition library</span></div>
<div class="line"><span class="lineno">  409</span>        mx.readFromXmlFile(doc, mtlx_file_name)</div>
<div class="line"><span class="lineno">  410</span>        mtlx_nodes = self.find_materialx_nodes(doc)</div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>        stdlib = self.create_library_document()</div>
<div class="line"><span class="lineno">  413</span>        doc.setDataLibrary(stdlib)</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>        self.emit_document_metadata(doc, stage)</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>        <span class="comment"># Translate</span></div>
<div class="line"><span class="lineno">  418</span>        self.emit_usd_shader_graph(doc, stage, mtlx_nodes, emit_all_value_elements)</div>
<div class="line"><span class="lineno">  419</span>        <span class="keywordflow">return</span> stage</div>
<div class="line"><span class="lineno">  420</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a278333f62848ad93b7dad62d0db0405c" name="a278333f62848ad93b7dad62d0db0405c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a278333f62848ad93b7dad62d0db0405c">&#9670;&#160;</a></span>emit_document_metadata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.emit_document_metadata </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stage</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emit MaterialX document metadata to the USD stage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doc</td><td>MaterialX document. </td></tr>
    <tr><td class="paramname">stage</td><td>USD stage. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00374">374</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  374</span>    <span class="keyword">def </span>emit_document_metadata(self, doc, stage):</div>
<div class="line"><span class="lineno">  375</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  376</span><span class="stringliteral">        Emit MaterialX document metadata to the USD stage.</span></div>
<div class="line"><span class="lineno">  377</span><span class="stringliteral">        @param doc: MaterialX document.</span></div>
<div class="line"><span class="lineno">  378</span><span class="stringliteral">        @param stage: USD stage.</span></div>
<div class="line"><span class="lineno">  379</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  380</span>        root_layer = stage.GetRootLayer()</div>
<div class="line"><span class="lineno">  381</span>        <span class="comment"># - color space</span></div>
<div class="line"><span class="lineno">  382</span>        color_space = doc.getColorSpace()</div>
<div class="line"><span class="lineno">  383</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> color_space:</div>
<div class="line"><span class="lineno">  384</span>            color_space = <span class="stringliteral">&quot;lin_rec709&quot;</span></div>
<div class="line"><span class="lineno">  385</span>        </div>
<div class="line"><span class="lineno">  386</span>        custom_layer_data = {<span class="stringliteral">&quot;colorSpace&quot;</span>: color_space}        </div>
<div class="line"><span class="lineno">  387</span>        <span class="keywordflow">if</span> root_layer.customLayerData:</div>
<div class="line"><span class="lineno">  388</span>            root_layer.customLayerData.update(custom_layer_data)</div>
<div class="line"><span class="lineno">  389</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  390</span>            root_layer.customLayerData = custom_layer_data</div>
<div class="line"><span class="lineno">  391</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4866b235b08b37a652ea95682816744d" name="a4866b235b08b37a652ea95682816744d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4866b235b08b37a652ea95682816744d">&#9670;&#160;</a></span>emit_usd_connections()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.emit_usd_connections </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>node</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stage</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>root_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emit connections between MaterialX elements as USD connections for a given MaterialX node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>MaterialX node to examine. </td></tr>
    <tr><td class="paramname">stage</td><td>USD stage to write connection to. </td></tr>
    <tr><td class="paramname">root_path</td><td>Root path for connections. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00112">112</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>    <span class="keyword">def </span>emit_usd_connections(self, node, stage, root_path):</div>
<div class="line"><span class="lineno">  113</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  114</span><span class="stringliteral">        Emit connections between MaterialX elements as USD connections for</span></div>
<div class="line"><span class="lineno">  115</span><span class="stringliteral">        a given MaterialX node.</span></div>
<div class="line"><span class="lineno">  116</span><span class="stringliteral">        @param node: MaterialX node to examine.</span></div>
<div class="line"><span class="lineno">  117</span><span class="stringliteral">        @param stage: USD stage to write connection to.</span></div>
<div class="line"><span class="lineno">  118</span><span class="stringliteral">        @param root_path: Root path for connections.</span></div>
<div class="line"><span class="lineno">  119</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  120</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> node:</div>
<div class="line"><span class="lineno">  121</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>        material_path = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">if</span> node.getType() == <span class="stringliteral">&quot;material&quot;</span>:</div>
<div class="line"><span class="lineno">  125</span>            material_path = node.getName()</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordflow">for</span> value_element <span class="keywordflow">in</span> node.getActiveValueElements():</div>
<div class="line"><span class="lineno">  128</span>            is_input = value_element.isA(mx.Input)</div>
<div class="line"><span class="lineno">  129</span>            is_output = value_element.isA(mx.Output)</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>            <span class="keywordflow">if</span> is_input <span class="keywordflow">or</span> is_output:</div>
<div class="line"><span class="lineno">  132</span>                interface_name = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>                <span class="comment"># Find out what type of element is connected to upstream:</span></div>
<div class="line"><span class="lineno">  135</span>                <span class="comment"># node, nodegraph, or interface input.</span></div>
<div class="line"><span class="lineno">  136</span>                mtlx_connection = value_element.getAttribute(<span class="stringliteral">&quot;nodename&quot;</span>)</div>
<div class="line"><span class="lineno">  137</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> mtlx_connection:</div>
<div class="line"><span class="lineno">  138</span>                    mtlx_connection = value_element.getAttribute(<span class="stringliteral">&quot;nodegraph&quot;</span>)</div>
<div class="line"><span class="lineno">  139</span>                <span class="keywordflow">if</span> is_input <span class="keywordflow">and</span> <span class="keywordflow">not</span> mtlx_connection:</div>
<div class="line"><span class="lineno">  140</span>                    mtlx_connection = value_element.getAttribute(<span class="stringliteral">&quot;interfacename&quot;</span>)</div>
<div class="line"><span class="lineno">  141</span>                    interface_name = mtlx_connection</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>                connection_path = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  144</span>                <span class="keywordflow">if</span> mtlx_connection:</div>
<div class="line"><span class="lineno">  145</span>                    <span class="comment"># Handle input connection by searching for the appropriate parent node.</span></div>
<div class="line"><span class="lineno">  146</span>                    <span class="comment"># - If it&#39;s an interface input we want the parent nodegraph. Otherwise</span></div>
<div class="line"><span class="lineno">  147</span>                    <span class="comment"># we want the node or nodegraph specified above.</span></div>
<div class="line"><span class="lineno">  148</span>                    <span class="comment"># - If the parent path is the root (getNamePath() is empty), then this is to</span></div>
<div class="line"><span class="lineno">  149</span>                    <span class="comment"># nodes at the root document level.</span></div>
<div class="line"><span class="lineno">  150</span>                    <span class="keywordflow">if</span> is_input:</div>
<div class="line"><span class="lineno">  151</span>                        parent = node.getParent()</div>
<div class="line"><span class="lineno">  152</span>                        <span class="keywordflow">if</span> parent.getNamePath():</div>
<div class="line"><span class="lineno">  153</span>                            <span class="keywordflow">if</span> interface_name:</div>
<div class="line"><span class="lineno">  154</span>                                connection_path = root_path + parent.getNamePath()</div>
<div class="line"><span class="lineno">  155</span>                            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  156</span>                                connection_path = root_path + parent.getNamePath() + <span class="stringliteral">&quot;/&quot;</span> + mtlx_connection</div>
<div class="line"><span class="lineno">  157</span>                        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  158</span>                            <span class="comment"># The connection is to a prim at the root level so insert a &#39;/&#39; identifier</span></div>
<div class="line"><span class="lineno">  159</span>                            <span class="comment"># as getNamePath() will return an empty string at the root Document level.</span></div>
<div class="line"><span class="lineno">  160</span>                            <span class="keywordflow">if</span> interface_name:</div>
<div class="line"><span class="lineno">  161</span>                                connection_path = root_path</div>
<div class="line"><span class="lineno">  162</span>                            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  163</span>                                connection_path = root_path + mtlx_connection</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>                    <span class="comment"># Handle output connection by looking for sibling elements</span></div>
<div class="line"><span class="lineno">  166</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  167</span>                        parent = node.getParent()</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>                        <span class="comment"># Connection is to sibling under the same nodegraph</span></div>
<div class="line"><span class="lineno">  170</span>                        <span class="keywordflow">if</span> node.isA(mx.NodeGraph):</div>
<div class="line"><span class="lineno">  171</span>                            connection_path = root_path + node.getNamePath() + <span class="stringliteral">&quot;/&quot;</span> + mtlx_connection</div>
<div class="line"><span class="lineno">  172</span>                        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  173</span>                            <span class="comment"># Connection is to a nodegraph parent of the current node</span></div>
<div class="line"><span class="lineno">  174</span>                            <span class="keywordflow">if</span> parent.getNamePath():</div>
<div class="line"><span class="lineno">  175</span>                                connection_path = root_path + parent.getNamePath() + <span class="stringliteral">&quot;/&quot;</span> + mtlx_connection</div>
<div class="line"><span class="lineno">  176</span>                            <span class="comment"># Connection is to the root document.</span></div>
<div class="line"><span class="lineno">  177</span>                            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  178</span>                                connection_path = root_path + mtlx_connection</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>                    <span class="comment"># Find the source prim</span></div>
<div class="line"><span class="lineno">  181</span>                    <span class="comment"># Assumes that the source is either a nodegraph, a material or a shader</span></div>
<div class="line"><span class="lineno">  182</span>                    connection_path = connection_path.removesuffix(<span class="stringliteral">&quot;/&quot;</span>)</div>
<div class="line"><span class="lineno">  183</span>                    source_prim = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  184</span>                    source_port = <span class="stringliteral">&quot;out&quot;</span></div>
<div class="line"><span class="lineno">  185</span>                    source = stage.GetPrimAtPath(connection_path)</div>
<div class="line"><span class="lineno">  186</span>                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> source <span class="keywordflow">and</span> material_path:</div>
<div class="line"><span class="lineno">  187</span>                        connection_path = <span class="stringliteral">&quot;/&quot;</span> + material_path + connection_path</div>
<div class="line"><span class="lineno">  188</span>                        source = stage.GetPrimAtPath(connection_path)</div>
<div class="line"><span class="lineno">  189</span>                        <span class="keywordflow">if</span> <span class="keywordflow">not</span> source:</div>
<div class="line"><span class="lineno">  190</span>                            source = stage.GetPrimAtPath(<span class="stringliteral">&quot;/&quot;</span> + material_path)</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>                    <span class="keywordflow">if</span> source:</div>
<div class="line"><span class="lineno">  193</span>                        <span class="keywordflow">if</span> source.IsA(UsdShade.Material):</div>
<div class="line"><span class="lineno">  194</span>                            source_prim = UsdShade.Material(source)</div>
<div class="line"><span class="lineno">  195</span>                        <span class="keywordflow">elif</span> source.IsA(UsdShade.NodeGraph):</div>
<div class="line"><span class="lineno">  196</span>                            source_prim = UsdShade.NodeGraph(source)</div>
<div class="line"><span class="lineno">  197</span>                        <span class="keywordflow">elif</span> source.IsA(UsdShade.Shader):</div>
<div class="line"><span class="lineno">  198</span>                            source_prim = UsdShade.Shader(source)</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>                        <span class="comment"># Special case handle interface input vs an output</span></div>
<div class="line"><span class="lineno">  201</span>                        <span class="keywordflow">if</span> interface_name:</div>
<div class="line"><span class="lineno">  202</span>                            source_port = interface_name</div>
<div class="line"><span class="lineno">  203</span>                        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  204</span>                            source_port = value_element.getAttribute(<span class="stringliteral">&quot;output&quot;</span>) <span class="keywordflow">or</span> <span class="stringliteral">&quot;out&quot;</span></div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>                    <span class="comment"># Find destination prim and port and make the appropriate connection.</span></div>
<div class="line"><span class="lineno">  207</span>                    <span class="comment"># Assumes that the destination is either a nodegraph, a material or a shader</span></div>
<div class="line"><span class="lineno">  208</span>                    <span class="keywordflow">if</span> source_prim:</div>
<div class="line"><span class="lineno">  209</span>                        dest = stage.GetPrimAtPath(root_path + node.getNamePath())</div>
<div class="line"><span class="lineno">  210</span>                        <span class="keywordflow">if</span> dest:</div>
<div class="line"><span class="lineno">  211</span>                            port_name = value_element.getName()</div>
<div class="line"><span class="lineno">  212</span>                            dest_node = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  213</span>                            <span class="keywordflow">if</span> dest.IsA(UsdShade.Material):</div>
<div class="line"><span class="lineno">  214</span>                                dest_node = UsdShade.Material(dest)</div>
<div class="line"><span class="lineno">  215</span>                            <span class="keywordflow">elif</span> dest.IsA(UsdShade.NodeGraph):</div>
<div class="line"><span class="lineno">  216</span>                                dest_node = UsdShade.NodeGraph(dest)</div>
<div class="line"><span class="lineno">  217</span>                            <span class="keywordflow">elif</span> dest.IsA(UsdShade.Shader):</div>
<div class="line"><span class="lineno">  218</span>                                dest_node = UsdShade.Shader(dest)</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>                            <span class="comment"># Find downstream port (input or output)</span></div>
<div class="line"><span class="lineno">  221</span>                            <span class="keywordflow">if</span> dest_node:</div>
<div class="line"><span class="lineno">  222</span>                                <span class="keywordflow">if</span> is_input:</div>
<div class="line"><span class="lineno">  223</span>                                    <span class="comment"># Map from MaterialX to USD connection syntax</span></div>
<div class="line"><span class="lineno">  224</span>                                    <span class="keywordflow">if</span> dest.IsA(UsdShade.Material):</div>
<div class="line"><span class="lineno">  225</span>                                        port_name = self.map_mtlx_to_usd_shader_notation(port_name)</div>
<div class="line"><span class="lineno">  226</span>                                        port_name = <span class="stringliteral">&quot;mtlx:&quot;</span> + port_name</div>
<div class="line"><span class="lineno">  227</span>                                        dest_port = dest_node.GetOutput(port_name)</div>
<div class="line"><span class="lineno">  228</span>                                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  229</span>                                        dest_port = dest_node.GetInput(port_name)</div>
<div class="line"><span class="lineno">  230</span>                                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  231</span>                                    dest_port = dest_node.GetOutput(port_name)</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>                                <span class="comment"># Make connection to interface input, or node/nodegraph output</span></div>
<div class="line"><span class="lineno">  234</span>                                <span class="keywordflow">if</span> dest_port:</div>
<div class="line"><span class="lineno">  235</span>                                    <span class="keywordflow">if</span> interface_name:</div>
<div class="line"><span class="lineno">  236</span>                                        interface_input = source_prim.GetInput(source_port)</div>
<div class="line"><span class="lineno">  237</span>                                        <span class="keywordflow">if</span> interface_input:</div>
<div class="line"><span class="lineno">  238</span>                                            <span class="keywordflow">if</span> <span class="keywordflow">not</span> dest_port.ConnectToSource(interface_input):</div>
<div class="line"><span class="lineno">  239</span>                                                self.log(f<span class="stringliteral">&quot;&gt; Failed to connect: {source.GetPrimPath()} --&gt; {dest_port.GetFullName()}&quot;</span>)</div>
<div class="line"><span class="lineno">  240</span>                                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  241</span>                                        source_prim_api = source_prim.ConnectableAPI()</div>
<div class="line"><span class="lineno">  242</span>                                        <span class="keywordflow">if</span> <span class="keywordflow">not</span> dest_port.ConnectToSource(source_prim_api, source_port):</div>
<div class="line"><span class="lineno">  243</span>                                            self.log(f<span class="stringliteral">&quot;&gt; Failed to connect: {source.GetPrimPath()} --&gt; {dest_port.GetFullName()}&quot;</span>)</div>
<div class="line"><span class="lineno">  244</span>                                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  245</span>                                    self.log(f<span class="stringliteral">&quot;&gt; Failed to find destination port: {port_name}&quot;</span>)</div>
<div class="line"><span class="lineno">  246</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="abeac4b76efac87dc1e1dab6e0c520ada" name="abeac4b76efac87dc1e1dab6e0c520ada"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeac4b76efac87dc1e1dab6e0c520ada">&#9670;&#160;</a></span>emit_usd_shader_graph()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.emit_usd_shader_graph </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>doc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stage</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>mtlx_nodes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>emit_all_value_elements</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>root</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;/MaterialX/Materials/&quot;</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emit USD shader graph to a given stage from a list of MaterialX nodes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doc</td><td>MaterialX source document. </td></tr>
    <tr><td class="paramname">stage</td><td>USD target stage. </td></tr>
    <tr><td class="paramname">mtlx_nodes</td><td>MaterialX shader nodes. </td></tr>
    <tr><td class="paramname">emit_all_value_elements</td><td>Emit value elements based on node definition, even if not specified on node instance. </td></tr>
    <tr><td class="paramname">root</td><td>Root path for the shader graph. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00314">314</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  314</span>    <span class="keyword">def </span>emit_usd_shader_graph(self, doc, stage, mtlx_nodes, emit_all_value_elements, root=&quot;/MaterialX/Materials/&quot;):</div>
<div class="line"><span class="lineno">  315</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  316</span><span class="stringliteral">        Emit USD shader graph to a given stage from a list of MaterialX nodes.</span></div>
<div class="line"><span class="lineno">  317</span><span class="stringliteral">        @param doc: MaterialX source document.</span></div>
<div class="line"><span class="lineno">  318</span><span class="stringliteral">        @param stage: USD target stage.</span></div>
<div class="line"><span class="lineno">  319</span><span class="stringliteral">        @param mtlx_nodes: MaterialX shader nodes.</span></div>
<div class="line"><span class="lineno">  320</span><span class="stringliteral">        @param emit_all_value_elements: Emit value elements based on node definition, even if not specified on node instance.</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral">        @param root: Root path for the shader graph.</span></div>
<div class="line"><span class="lineno">  322</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  323</span>        material_path = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  324</span>        <span class="keywordflow">for</span> node_name <span class="keywordflow">in</span> mtlx_nodes:</div>
<div class="line"><span class="lineno">  325</span>            elem = doc.getDescendant(node_name)</div>
<div class="line"><span class="lineno">  326</span>            <span class="keywordflow">if</span> elem.getType() == <span class="stringliteral">&quot;material&quot;</span>:</div>
<div class="line"><span class="lineno">  327</span>                material_path = elem.getName()</div>
<div class="line"><span class="lineno">  328</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>        <span class="comment"># Emit USD nodes</span></div>
<div class="line"><span class="lineno">  331</span>        <span class="keywordflow">for</span> node_name <span class="keywordflow">in</span> mtlx_nodes:</div>
<div class="line"><span class="lineno">  332</span>            elem = doc.getDescendant(node_name)</div>
<div class="line"><span class="lineno">  333</span>            usd_path = root + elem.getNamePath()</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>            node_def = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  336</span>            usd_node = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  337</span>            <span class="keywordflow">if</span> elem.getType() == <span class="stringliteral">&quot;material&quot;</span>:</div>
<div class="line"><span class="lineno">  338</span>                self.log(f<span class="stringliteral">&quot;Add material at path: {usd_path}&quot;</span>, -1)</div>
<div class="line"><span class="lineno">  339</span>                usd_node = UsdShade.Material.Define(stage, usd_path)</div>
<div class="line"><span class="lineno">  340</span>                material_prim = usd_node.GetPrim()</div>
<div class="line"><span class="lineno">  341</span>                material_prim.ApplyAPI(<span class="stringliteral">&quot;MaterialXConfigAPI&quot;</span>)</div>
<div class="line"><span class="lineno">  342</span>            <span class="keywordflow">elif</span> elem.isA(mx.Node):</div>
<div class="line"><span class="lineno">  343</span>                node_def = elem.getNodeDef()</div>
<div class="line"><span class="lineno">  344</span>                self.log(f<span class="stringliteral">&quot;Add node at path: {usd_path}&quot;</span>, -1)</div>
<div class="line"><span class="lineno">  345</span>                usd_node = UsdShade.Shader.Define(stage, usd_path)</div>
<div class="line"><span class="lineno">  346</span>            <span class="keywordflow">elif</span> elem.isA(mx.NodeGraph):</div>
<div class="line"><span class="lineno">  347</span>                self.log(f<span class="stringliteral">&quot;Add nodegraph at path: {usd_path}&quot;</span>, -1)</div>
<div class="line"><span class="lineno">  348</span>                usd_node = UsdShade.NodeGraph.Define(stage, usd_path)</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>            <span class="keywordflow">if</span> usd_node:</div>
<div class="line"><span class="lineno">  351</span>                <span class="keywordflow">if</span> node_def:</div>
<div class="line"><span class="lineno">  352</span>                    usd_node.SetShaderId(node_def.getName())</div>
<div class="line"><span class="lineno">  353</span>                self.emit_usd_value_elements(elem, usd_node, emit_all_value_elements)</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>        <span class="comment"># Emit connections between USD nodes</span></div>
<div class="line"><span class="lineno">  356</span>        <span class="keywordflow">for</span> node_name <span class="keywordflow">in</span> mtlx_nodes:</div>
<div class="line"><span class="lineno">  357</span>            elem = doc.getDescendant(node_name)</div>
<div class="line"><span class="lineno">  358</span>            <span class="keywordflow">if</span> elem.getType() == <span class="stringliteral">&quot;material&quot;</span> <span class="keywordflow">or</span> elem.isA(mx.Node) <span class="keywordflow">or</span> elem.isA(mx.NodeGraph):</div>
<div class="line"><span class="lineno">  359</span>                self.emit_usd_connections(elem, stage, root)</div>
<div class="line"><span class="lineno">  360</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac82506a7654c7f125c26ef93382a6391" name="ac82506a7654c7f125c26ef93382a6391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac82506a7654c7f125c26ef93382a6391">&#9670;&#160;</a></span>emit_usd_value_elements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.emit_usd_value_elements </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>node</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>usd_node</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>emit_all_value_elements</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emit MaterialX value elements in USD. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>MaterialX node with value elements to scan. </td></tr>
    <tr><td class="paramname">usd_node</td><td>UsdShade node to create value elements on. </td></tr>
    <tr><td class="paramname">emit_all_value_elements</td><td>Emit value elements based on node definition, even if not specified on node instance. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00247">247</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  247</span>    <span class="keyword">def </span>emit_usd_value_elements(self, node, usd_node, emit_all_value_elements):</div>
<div class="line"><span class="lineno">  248</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  249</span><span class="stringliteral">        Emit MaterialX value elements in USD.</span></div>
<div class="line"><span class="lineno">  250</span><span class="stringliteral">        @param node: MaterialX node with value elements to scan.</span></div>
<div class="line"><span class="lineno">  251</span><span class="stringliteral">        @param usd_node: UsdShade node to create value elements on.</span></div>
<div class="line"><span class="lineno">  252</span><span class="stringliteral">        @param emit_all_value_elements: Emit value elements based on node definition, even if not specified on node instance.</span></div>
<div class="line"><span class="lineno">  253</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  254</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> node:</div>
<div class="line"><span class="lineno">  255</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>        is_material = node.getType() == <span class="stringliteral">&quot;material&quot;</span></div>
<div class="line"><span class="lineno">  258</span>        node_def = node.getNodeDef()</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>        <span class="comment"># Instantiate with all the nodedef inputs (if emit_all_value_elements is True).</span></div>
<div class="line"><span class="lineno">  261</span>        <span class="comment"># Note that outputs are always created.</span></div>
<div class="line"><span class="lineno">  262</span>        <span class="keywordflow">if</span> node_def <span class="keywordflow">and</span> <span class="keywordflow">not</span> is_material:</div>
<div class="line"><span class="lineno">  263</span>            <span class="keywordflow">for</span> value_element <span class="keywordflow">in</span> node_def.getActiveValueElements():</div>
<div class="line"><span class="lineno">  264</span>                <span class="keywordflow">if</span> value_element.isA(mx.Input):</div>
<div class="line"><span class="lineno">  265</span>                    <span class="keywordflow">if</span> emit_all_value_elements:</div>
<div class="line"><span class="lineno">  266</span>                        mtlx_type = value_element.getType()</div>
<div class="line"><span class="lineno">  267</span>                        usd_type = self.map_mtlx_to_usd_type(mtlx_type)</div>
<div class="line"><span class="lineno">  268</span>                        port_name = value_element.getName()</div>
<div class="line"><span class="lineno">  269</span>                        usd_input = usd_node.CreateInput(port_name, usd_type)</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>                        <span class="keywordflow">if</span> value_element.getValueString():</div>
<div class="line"><span class="lineno">  272</span>                            mtlx_value = value_element.getValue()</div>
<div class="line"><span class="lineno">  273</span>                            usd_value = self.map_mtlx_to_usd_value(mtlx_type, mtlx_value)</div>
<div class="line"><span class="lineno">  274</span>                            <span class="keywordflow">if</span> usd_value <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  275</span>                                usd_input.Set(usd_value)</div>
<div class="line"><span class="lineno">  276</span>                        color_space = value_element.getAttribute(<span class="stringliteral">&quot;colorspace&quot;</span>)</div>
<div class="line"><span class="lineno">  277</span>                        <span class="keywordflow">if</span> color_space:</div>
<div class="line"><span class="lineno">  278</span>                            usd_input.GetAttr().SetColorSpace(color_space)                            </div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>                <span class="keywordflow">elif</span> <span class="keywordflow">not</span> is_material <span class="keywordflow">and</span> value_element.isA(mx.Output):</div>
<div class="line"><span class="lineno">  281</span>                    usd_node.CreateOutput(value_element.getName(), self.map_mtlx_to_usd_type(value_element.getType()))</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>        <span class="comment"># From the given instance add inputs and outputs and set values.</span></div>
<div class="line"><span class="lineno">  284</span>        <span class="comment"># This may override the default value specified on the definition.</span></div>
<div class="line"><span class="lineno">  285</span>        <span class="keywordflow">for</span> value_element <span class="keywordflow">in</span> node.getActiveValueElements():</div>
<div class="line"><span class="lineno">  286</span>            <span class="keywordflow">if</span> value_element.isA(mx.Input):</div>
<div class="line"><span class="lineno">  287</span>                mtlx_type = value_element.getType()</div>
<div class="line"><span class="lineno">  288</span>                usd_type = self.map_mtlx_to_usd_type(mtlx_type)</div>
<div class="line"><span class="lineno">  289</span>                port_name = value_element.getName()</div>
<div class="line"><span class="lineno">  290</span>                <span class="keywordflow">if</span> is_material:</div>
<div class="line"><span class="lineno">  291</span>                    <span class="comment"># Map from Materials to USD notation</span></div>
<div class="line"><span class="lineno">  292</span>                    port_name = self.map_mtlx_to_usd_shader_notation(port_name)</div>
<div class="line"><span class="lineno">  293</span>                    usd_input = usd_node.CreateOutput(<span class="stringliteral">&quot;mtlx:&quot;</span> + port_name, usd_type)</div>
<div class="line"><span class="lineno">  294</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  295</span>                    usd_input = usd_node.CreateInput(port_name, usd_type)</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>                <span class="comment"># Set value. Note that we check the length of the value string</span></div>
<div class="line"><span class="lineno">  298</span>                <span class="comment"># instead of getValue() as a 0 value will be skipped.</span></div>
<div class="line"><span class="lineno">  299</span>                <span class="keywordflow">if</span> value_element.getValueString():</div>
<div class="line"><span class="lineno">  300</span>                    mtlx_value = value_element.getValue()</div>
<div class="line"><span class="lineno">  301</span>                    usd_value = self.map_mtlx_to_usd_value(mtlx_type, mtlx_value)</div>
<div class="line"><span class="lineno">  302</span>                    <span class="keywordflow">if</span> usd_value <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  303</span>                        usd_input.Set(usd_value)</div>
<div class="line"><span class="lineno">  304</span>                color_space = value_element.getAttribute(<span class="stringliteral">&quot;colorspace&quot;</span>)</div>
<div class="line"><span class="lineno">  305</span>                <span class="keywordflow">if</span> color_space:</div>
<div class="line"><span class="lineno">  306</span>                    usd_input.GetAttr().SetColorSpace(color_space)                            </div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>            <span class="keywordflow">elif</span> <span class="keywordflow">not</span> is_material <span class="keywordflow">and</span> value_element.isA(mx.Output):</div>
<div class="line"><span class="lineno">  310</span>                usd_output = usd_node.GetInput(value_element.getName())</div>
<div class="line"><span class="lineno">  311</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> usd_output:</div>
<div class="line"><span class="lineno">  312</span>                    usd_node.CreateOutput(value_element.getName(), self.map_mtlx_to_usd_type(value_element.getType()))</div>
<div class="line"><span class="lineno">  313</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f3534fa3ccc70fae5984795b5ae406b" name="a1f3534fa3ccc70fae5984795b5ae406b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f3534fa3ccc70fae5984795b5ae406b">&#9670;&#160;</a></span>find_materialx_nodes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.find_materialx_nodes </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>doc</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find all nodes in a MaterialX document. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doc</td><td>MaterialX document. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: List of node paths. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00361">361</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  361</span>    <span class="keyword">def </span>find_materialx_nodes(self, doc):</div>
<div class="line"><span class="lineno">  362</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral">        Find all nodes in a MaterialX document.</span></div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral">        @param doc: MaterialX document.</span></div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral">        @return: List of node paths.</span></div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  367</span>        visited_nodes = []</div>
<div class="line"><span class="lineno">  368</span>        <span class="keywordflow">for</span> elem <span class="keywordflow">in</span> doc.traverseTree():</div>
<div class="line"><span class="lineno">  369</span>            path = elem.getNamePath()</div>
<div class="line"><span class="lineno">  370</span>            <span class="keywordflow">if</span> path <span class="keywordflow">not</span> <span class="keywordflow">in</span> visited_nodes:</div>
<div class="line"><span class="lineno">  371</span>                visited_nodes.append(path)</div>
<div class="line"><span class="lineno">  372</span>        <span class="keywordflow">return</span> visited_nodes</div>
<div class="line"><span class="lineno">  373</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad6306be42de0dc6df4e7271534f2622a" name="ad6306be42de0dc6df4e7271534f2622a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6306be42de0dc6df4e7271534f2622a">&#9670;&#160;</a></span>get_usd_types()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.get_usd_types </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve a list of USD Sdf value type names. </p>
<dl class="section return"><dt>Returns</dt><dd>: List of USD Sdf value type names. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00038">38</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   38</span>    <span class="keyword">def </span>get_usd_types(self):</div>
<div class="line"><span class="lineno">   39</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   40</span><span class="stringliteral">        Retrieve a list of USD Sdf value type names.</span></div>
<div class="line"><span class="lineno">   41</span><span class="stringliteral">        @return: List of USD Sdf value type names.</span></div>
<div class="line"><span class="lineno">   42</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   43</span>        types = []</div>
<div class="line"><span class="lineno">   44</span>        <span class="keywordflow">for</span> t <span class="keywordflow">in</span> dir(Sdf.ValueTypeNames):</div>
<div class="line"><span class="lineno">   45</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> t.startswith(<span class="stringliteral">&quot;__&quot;</span>):</div>
<div class="line"><span class="lineno">   46</span>                types.append(str(t))</div>
<div class="line"><span class="lineno">   47</span>        <span class="keywordflow">return</span> types</div>
<div class="line"><span class="lineno">   48</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d9d84b6b61c55141be13188aff26a6f" name="a9d9d84b6b61c55141be13188aff26a6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d9d84b6b61c55141be13188aff26a6f">&#9670;&#160;</a></span>log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.log </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>level</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log a message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>Message to log. </td></tr>
    <tr><td class="paramname">level</td><td>Log level. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00020">20</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   20</span>    <span class="keyword">def </span>log(self, msg, level=0):</div>
<div class="line"><span class="lineno">   21</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   22</span><span class="stringliteral">        Log a message.</span></div>
<div class="line"><span class="lineno">   23</span><span class="stringliteral">        @param msg: Message to log.</span></div>
<div class="line"><span class="lineno">   24</span><span class="stringliteral">        @param level: Log level.</span></div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   26</span>        <span class="keywordflow">if</span> self.logger:</div>
<div class="line"><span class="lineno">   27</span>            <span class="keywordflow">if</span> level == 1:</div>
<div class="line"><span class="lineno">   28</span>                self.logger.warning(msg)</div>
<div class="line"><span class="lineno">   29</span>            <span class="keywordflow">elif</span> level == 2:</div>
<div class="line"><span class="lineno">   30</span>                self.logger.error(msg)</div>
<div class="line"><span class="lineno">   31</span>            <span class="keywordflow">elif</span> level == -1:</div>
<div class="line"><span class="lineno">   32</span>                self.logger.debug(msg)</div>
<div class="line"><span class="lineno">   33</span>            <span class="keywordflow">else</span>:                </div>
<div class="line"><span class="lineno">   34</span>                self.logger.info(msg)</div>
<div class="line"><span class="lineno">   35</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   36</span>            self.log(msg)</div>
<div class="line"><span class="lineno">   37</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f51a226dbdfc283b558b92a14cb2835" name="a8f51a226dbdfc283b558b92a14cb2835"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f51a226dbdfc283b558b92a14cb2835">&#9670;&#160;</a></span>map_mtlx_to_usd_shader_notation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.map_mtlx_to_usd_shader_notation </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Utility to map from MaterialX shader notation to USD notation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>MaterialX shader notation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: Corresponding USD notation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00098">98</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   98</span>    <span class="keyword">def </span>map_mtlx_to_usd_shader_notation(self, name):</div>
<div class="line"><span class="lineno">   99</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  100</span><span class="stringliteral">        Utility to map from MaterialX shader notation to USD notation.</span></div>
<div class="line"><span class="lineno">  101</span><span class="stringliteral">        @param name: MaterialX shader notation.</span></div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral">        @return: Corresponding USD notation.</span></div>
<div class="line"><span class="lineno">  103</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  104</span>        <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;surfaceshader&quot;</span>:</div>
<div class="line"><span class="lineno">  105</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;surface&quot;</span></div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">elif</span> name == <span class="stringliteral">&quot;displacementshader&quot;</span>:</div>
<div class="line"><span class="lineno">  107</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;displacement&quot;</span></div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">elif</span> name == <span class="stringliteral">&quot;volumeshader&quot;</span>:</div>
<div class="line"><span class="lineno">  109</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;volume&quot;</span></div>
<div class="line"><span class="lineno">  110</span>        <span class="keywordflow">return</span> name</div>
<div class="line"><span class="lineno">  111</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0266cb1877666900376eac212a5af870" name="a0266cb1877666900376eac212a5af870"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0266cb1877666900376eac212a5af870">&#9670;&#160;</a></span>map_mtlx_to_usd_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.map_mtlx_to_usd_type </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>mtlx_type</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map a MaterialX type to a USD Sdf type.The mapping is easier from MaterialX as the number of type variations is much less. </p>
<p>Note that one USD type is chosen with no options for choosing things like precision. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mtlx_type</td><td>MaterialX type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: Corresponding USD Sdf type. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00049">49</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>    <span class="keyword">def </span>map_mtlx_to_usd_type(self, mtlx_type : str):</div>
<div class="line"><span class="lineno">   50</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">        Map a MaterialX type to a USD Sdf type.The mapping is easier from MaterialX as</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">        the number of type variations is much less. Note that one USD type is chosen</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">        with no options for choosing things like precision.</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">        @param mtlx_type: MaterialX type.</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">        @return: Corresponding USD Sdf type.</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   57</span>        mtlx_usd_map = {</div>
<div class="line"><span class="lineno">   58</span>            <span class="stringliteral">&quot;filename&quot;</span>: Sdf.ValueTypeNames.Asset,</div>
<div class="line"><span class="lineno">   59</span>            <span class="stringliteral">&quot;string&quot;</span>: Sdf.ValueTypeNames.String,</div>
<div class="line"><span class="lineno">   60</span>            <span class="stringliteral">&quot;boolean&quot;</span>: Sdf.ValueTypeNames.Bool,</div>
<div class="line"><span class="lineno">   61</span>            <span class="stringliteral">&quot;integer&quot;</span>: Sdf.ValueTypeNames.Int,</div>
<div class="line"><span class="lineno">   62</span>            <span class="stringliteral">&quot;float&quot;</span>: Sdf.ValueTypeNames.Float,</div>
<div class="line"><span class="lineno">   63</span>            <span class="stringliteral">&quot;color3&quot;</span>: Sdf.ValueTypeNames.Color3f,</div>
<div class="line"><span class="lineno">   64</span>            <span class="stringliteral">&quot;color4&quot;</span>: Sdf.ValueTypeNames.Color4f,</div>
<div class="line"><span class="lineno">   65</span>            <span class="stringliteral">&quot;vector2&quot;</span>: Sdf.ValueTypeNames.Float2,</div>
<div class="line"><span class="lineno">   66</span>            <span class="stringliteral">&quot;vector3&quot;</span>: Sdf.ValueTypeNames.Float3,</div>
<div class="line"><span class="lineno">   67</span>            <span class="stringliteral">&quot;vector4&quot;</span>: Sdf.ValueTypeNames.Float4,</div>
<div class="line"><span class="lineno">   68</span>            <span class="stringliteral">&quot;surfaceshader&quot;</span>: Sdf.ValueTypeNames.Token,</div>
<div class="line"><span class="lineno">   69</span>            <span class="stringliteral">&quot;volumeshader&quot;</span>: Sdf.ValueTypeNames.Token,</div>
<div class="line"><span class="lineno">   70</span>            <span class="stringliteral">&quot;displacementshader&quot;</span>: Sdf.ValueTypeNames.Token,</div>
<div class="line"><span class="lineno">   71</span>        }</div>
<div class="line"><span class="lineno">   72</span>        <span class="keywordflow">return</span> mtlx_usd_map.get(mtlx_type, Sdf.ValueTypeNames.Token)</div>
<div class="line"><span class="lineno">   73</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a8f74484528ffa9d71c13d55881e815" name="a9a8f74484528ffa9d71c13d55881e815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a8f74484528ffa9d71c13d55881e815">&#9670;&#160;</a></span>map_mtlx_to_usd_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.map_mtlx_to_usd_value </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>mtlx_type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>mtlx_value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map a MaterialX value of a given type to a USD value. </p>
<p>TODO: Add all types here... </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mtlx_type</td><td>MaterialX type. </td></tr>
    <tr><td class="paramname">mtlx_value</td><td>MaterialX value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: Corresponding USD value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00074">74</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   74</span>    <span class="keyword">def </span>map_mtlx_to_usd_value(self, mtlx_type, mtlx_value):</div>
<div class="line"><span class="lineno">   75</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">        Map a MaterialX value of a given type to a USD value.</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">        TODO: Add all types here...</span></div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">        @param mtlx_type: MaterialX type.</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">        @param mtlx_value: MaterialX value.</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">        @return: Corresponding USD value.</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   82</span>        <span class="keywordflow">if</span> mtlx_type == <span class="stringliteral">&quot;float&quot;</span>:</div>
<div class="line"><span class="lineno">   83</span>            <span class="keywordflow">return</span> float(mtlx_value)</div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordflow">elif</span> mtlx_type == <span class="stringliteral">&quot;integer&quot;</span>:</div>
<div class="line"><span class="lineno">   85</span>            <span class="keywordflow">return</span> int(mtlx_value)</div>
<div class="line"><span class="lineno">   86</span>        <span class="keywordflow">elif</span> mtlx_type == <span class="stringliteral">&quot;boolean&quot;</span>:</div>
<div class="line"><span class="lineno">   87</span>            <span class="keywordflow">return</span> bool(mtlx_value)</div>
<div class="line"><span class="lineno">   88</span>        <span class="keywordflow">elif</span> mtlx_type <span class="keywordflow">in</span> (<span class="stringliteral">&quot;string&quot;</span>, <span class="stringliteral">&quot;filename&quot;</span>):</div>
<div class="line"><span class="lineno">   89</span>            <span class="keywordflow">return</span> str(mtlx_value)</div>
<div class="line"><span class="lineno">   90</span>        <span class="keywordflow">elif</span> mtlx_type == <span class="stringliteral">&quot;vector2&quot;</span>:</div>
<div class="line"><span class="lineno">   91</span>            <span class="keywordflow">return</span> Gf.Vec2f(mtlx_value[0], mtlx_value[1])</div>
<div class="line"><span class="lineno">   92</span>        <span class="keywordflow">elif</span> mtlx_type <span class="keywordflow">in</span> (<span class="stringliteral">&quot;color3&quot;</span>, <span class="stringliteral">&quot;vector3&quot;</span>):</div>
<div class="line"><span class="lineno">   93</span>            <span class="keywordflow">return</span> Gf.Vec3f(mtlx_value[0], mtlx_value[1], mtlx_value[2])</div>
<div class="line"><span class="lineno">   94</span>        <span class="keywordflow">elif</span> mtlx_type <span class="keywordflow">in</span> (<span class="stringliteral">&quot;color4&quot;</span>, <span class="stringliteral">&quot;vector4&quot;</span>):</div>
<div class="line"><span class="lineno">   95</span>            <span class="keywordflow">return</span> Gf.Vec4f(mtlx_value[0], mtlx_value[1], mtlx_value[2], mtlx_value[3])</div>
<div class="line"><span class="lineno">   96</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   97</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a455f0164eb1970163f89cd5c27810174" name="a455f0164eb1970163f89cd5c27810174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a455f0164eb1970163f89cd5c27810174">&#9670;&#160;</a></span>logger <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">materialxusd.mxusd_custom.MtlxToUsd.logger = logger</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00018">18</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>

</div>
</div>
<a id="a3d9676089811ab9ad0b3336cf9423e82" name="a3d9676089811ab9ad0b3336cf9423e82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d9676089811ab9ad0b3336cf9423e82">&#9670;&#160;</a></span>logger <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int materialxusd.mxusd_custom.MtlxToUsd.logger = 1:</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mxusd__custom_8py_source.html#l00026">26</a> of file <a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="mxusd__custom_8py_source.html">mxusd_custom.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li>
      <button class="btn btn-outline" type="button">
        <a href="https://github.com/kwokcb/materialxusd" target="_blank"><b class="fa-brands fa-github fa-1x"
            style="color: #ffffff;"></b></a>
      </button>
      <button class="btn btn-outline " type="button">
        <a href="https://www.linkedin.com/in/bernard-kwok/" target="_blank"><b class="fa-brands fa-linkedin-in fa-1x"
            style="color: #0082ca;"></b></a>
      </button>
    </li>
    <li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
        <img alt="Creative Commons License" style="border-width:0; width: 48px"
          src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
    </li>
    </a>
    <li><a href="https://kwokcb.github.io/nanmuconsulting/" target="_blank" style="color: #333; text-decoration: none;">
        &copy; 2022-2025 NanMu Consulting.
      </a>
    </li>
  </ul>
</div>
<!-- Bootstrap JS (Optional) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
