<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MaterialXUSD: source.materialxusd.materialxusd.MaterialxUSDConverter Class Reference</title>
<link rel="icon" href="toon_sphere.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- Font Awesome CDN -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="MX_LAB.svg" style="width: 48px"/></td>
  <td id="projectalign">
   <div id="projectname">MaterialXUSD<span id="projectnumber">&#160;0.25.05</span>
   </div>
   <div id="projectbrief">Utilities for using MaterialX with USD</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classsource_1_1materialxusd_1_1materialxusd_1_1_materialx_u_s_d_converter.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classsource_1_1materialxusd_1_1materialxusd_1_1_materialx_u_s_d_converter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">source.materialxusd.materialxusd.MaterialxUSDConverter Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class that converts a MaterialX file to a USD file with an appropriate scene.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa6496bb14104e35c2665dc3a8a2d66cb" id="r_aa6496bb14104e35c2665dc3a8a2d66cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa6496bb14104e35c2665dc3a8a2d66cb">__init__</a> (self)</td></tr>
<tr class="memdesc:aa6496bb14104e35c2665dc3a8a2d66cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the <a class="el" href="classsource_1_1materialxusd_1_1materialxusd_1_1_materialx_u_s_d_converter.html" title="Class that converts a MaterialX file to a USD file with an appropriate scene.">MaterialxUSDConverter</a> class.  <br /></td></tr>
<tr class="separator:aa6496bb14104e35c2665dc3a8a2d66cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca957fa79bf2d7423c686e85a4269fbf" id="r_aca957fa79bf2d7423c686e85a4269fbf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aca957fa79bf2d7423c686e85a4269fbf">validate_stage</a> (self, str file, bool verboseOutput=False)</td></tr>
<tr class="memdesc:aca957fa79bf2d7423c686e85a4269fbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function validates a USD file using the ComplianceChecker.  <br /></td></tr>
<tr class="separator:aca957fa79bf2d7423c686e85a4269fbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90b0c3056c24a712ed514d7aa4f19996" id="r_a90b0c3056c24a712ed514d7aa4f19996"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90b0c3056c24a712ed514d7aa4f19996">find_first_valid_prim</a> (self, stage)</td></tr>
<tr class="memdesc:a90b0c3056c24a712ed514d7aa4f19996"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function finds the first valid prim in root layer of a stage.  <br /></td></tr>
<tr class="separator:a90b0c3056c24a712ed514d7aa4f19996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a507d4538ab4857fc3500e2820caf953f" id="r_a507d4538ab4857fc3500e2820caf953f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a507d4538ab4857fc3500e2820caf953f">set_required_validation_attributes</a> (self, stage)</td></tr>
<tr class="memdesc:a507d4538ab4857fc3500e2820caf953f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets the required validation attributes for the stage.  <br /></td></tr>
<tr class="separator:a507d4538ab4857fc3500e2820caf953f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79421701c56fa9c33ba70216fc02c0fe" id="r_a79421701c56fa9c33ba70216fc02c0fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a79421701c56fa9c33ba70216fc02c0fe">find_materials</a> (self, stage, bool find_first=True)</td></tr>
<tr class="memdesc:a79421701c56fa9c33ba70216fc02c0fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function finds the first material in the stage.  <br /></td></tr>
<tr class="separator:a79421701c56fa9c33ba70216fc02c0fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a833cabcaa3a823ebd16c2e443341746c" id="r_a833cabcaa3a823ebd16c2e443341746c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a833cabcaa3a823ebd16c2e443341746c">add_skydome_light</a> (self, Usd.Stage stage, str environment_path, str root_path=&quot;/TestScene/Lights&quot;, str light_name=&quot;EnvironmentLight&quot;, xform_scale=Gf.Vec3f(1.3, 1.3, 1.3), xform_rotate=Gf.Vec3f(0, 0, 0))</td></tr>
<tr class="memdesc:a833cabcaa3a823ebd16c2e443341746c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function adds a skydome light to the stage.  <br /></td></tr>
<tr class="separator:a833cabcaa3a823ebd16c2e443341746c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c356d76f17416877cb3dca7077db90d" id="r_a5c356d76f17416877cb3dca7077db90d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c356d76f17416877cb3dca7077db90d">add_geometry_reference</a> (self, Usd.Stage stage, str geometry_path, str root_path=&quot;/TestScene/Geometry&quot;)</td></tr>
<tr class="memdesc:a5c356d76f17416877cb3dca7077db90d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function adds a geometry reference to the stage.  <br /></td></tr>
<tr class="separator:a5c356d76f17416877cb3dca7077db90d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e96939fa66d8f77d10e2dc02871d757" id="r_a8e96939fa66d8f77d10e2dc02871d757"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8e96939fa66d8f77d10e2dc02871d757">find_first_camera</a> (self, Usd.Stage stage)</td></tr>
<tr class="memdesc:a8e96939fa66d8f77d10e2dc02871d757"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function finds the first camera in the stage.  <br /></td></tr>
<tr class="separator:a8e96939fa66d8f77d10e2dc02871d757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b151be83c2054ac26f8d7be2bd25cbf" id="r_a2b151be83c2054ac26f8d7be2bd25cbf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2b151be83c2054ac26f8d7be2bd25cbf">add_camera</a> (self, Usd.Stage stage, str camera_path, str root_path=&quot;/TestScene/Camera&quot;, str geometry_path=&quot;/TestScene/Geometry&quot;)</td></tr>
<tr class="memdesc:a2b151be83c2054ac26f8d7be2bd25cbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function adds a camera to the stage.  <br /></td></tr>
<tr class="separator:a2b151be83c2054ac26f8d7be2bd25cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a009b7c605943400283e61ef9345023f8" id="r_a009b7c605943400283e61ef9345023f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a009b7c605943400283e61ef9345023f8">mtlx_to_usd</a> (self, str input_usd_path, str shaderball_path, str environment_path, str material_file_path, str camera_path, use_custom=False)</td></tr>
<tr class="memdesc:a009b7c605943400283e61ef9345023f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function reads the input usd file and adds the shaderball geometry and environment light to the scene.  <br /></td></tr>
<tr class="separator:a009b7c605943400283e61ef9345023f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea23f4b712b09be585b1b89fa6673708" id="r_aea23f4b712b09be585b1b89fa6673708"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aea23f4b712b09be585b1b89fa6673708">get_flattend_layer</a> (self, stage)</td></tr>
<tr class="memdesc:aea23f4b712b09be585b1b89fa6673708"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function flattens the stage and returns the flattened layer.  <br /></td></tr>
<tr class="separator:aea23f4b712b09be585b1b89fa6673708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add4df306e35bed3c2426d6320fd6dae3" id="r_add4df306e35bed3c2426d6320fd6dae3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add4df306e35bed3c2426d6320fd6dae3">save_flattened_layer</a> (self, flattened_layer, str output_path)</td></tr>
<tr class="memdesc:add4df306e35bed3c2426d6320fd6dae3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function saves the flattened stage to a new USD file.  <br /></td></tr>
<tr class="separator:add4df306e35bed3c2426d6320fd6dae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af176d1262d255c76bed2f730ea94bd9c" id="r_af176d1262d255c76bed2f730ea94bd9c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af176d1262d255c76bed2f730ea94bd9c">create_usdz_package</a> (self, str usdz_file_path, flattened_layer)</td></tr>
<tr class="memdesc:af176d1262d255c76bed2f730ea94bd9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function creates a new USDZ package from a flattened layer.  <br /></td></tr>
<tr class="separator:af176d1262d255c76bed2f730ea94bd9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a0f563d0e77dc301cafd4073087c013dd" id="r_a0f563d0e77dc301cafd4073087c013dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0f563d0e77dc301cafd4073087c013dd">logger</a> = logging.getLogger('MX2USD')</td></tr>
<tr class="separator:a0f563d0e77dc301cafd4073087c013dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class that converts a MaterialX file to a USD file with an appropriate scene. </p>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00010">10</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa6496bb14104e35c2665dc3a8a2d66cb" name="aa6496bb14104e35c2665dc3a8a2d66cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6496bb14104e35c2665dc3a8a2d66cb">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.__init__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for the <a class="el" href="classsource_1_1materialxusd_1_1materialxusd_1_1_materialx_u_s_d_converter.html" title="Class that converts a MaterialX file to a USD file with an appropriate scene.">MaterialxUSDConverter</a> class. </p>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00014">14</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   14</span>    <span class="keyword">def </span>__init__(self):</div>
<div class="line"><span class="lineno">   15</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   16</span><span class="stringliteral">        @brief Constructor for the MaterialxUSDConverter class.</span></div>
<div class="line"><span class="lineno">   17</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   18</span>        logging.basicConfig(level=logging.INFO)</div>
<div class="line"><span class="lineno">   19</span>        self.logger = logging.getLogger(<span class="stringliteral">&#39;MX2USD&#39;</span>)</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2b151be83c2054ac26f8d7be2bd25cbf" name="a2b151be83c2054ac26f8d7be2bd25cbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b151be83c2054ac26f8d7be2bd25cbf">&#9670;&#160;</a></span>add_camera()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.add_camera </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Usd.Stage</td>          <td class="paramname"><span class="paramname"><em>stage</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>camera_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>root_path</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;/TestScene/Camera&quot;</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>geometry_path</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;/TestScene/Geometry&quot;</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function adds a camera to the stage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>The stage to add the camera. </td></tr>
    <tr><td class="paramname">camera_path</td><td>The path to the camera file. </td></tr>
    <tr><td class="paramname">root_path</td><td>The root path to add the camera. </td></tr>
    <tr><td class="paramname">geometry_path</td><td>The path to the geometry file. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00169">169</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  169</span>    <span class="keyword">def </span>add_camera(self, stage : Usd.Stage, camera_path : str, root_path : str=<span class="stringliteral">&quot;/TestScene/Camera&quot;</span>, geometry_path : str=<span class="stringliteral">&quot;/TestScene/Geometry&quot;</span>):</div>
<div class="line"><span class="lineno">  170</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral">        @brief This function adds a camera to the stage.</span></div>
<div class="line"><span class="lineno">  172</span><span class="stringliteral">        @param stage: The stage to add the camera.</span></div>
<div class="line"><span class="lineno">  173</span><span class="stringliteral">        @param camera_path: The path to the camera file.</span></div>
<div class="line"><span class="lineno">  174</span><span class="stringliteral">        @param root_path: The root path to add the camera.</span></div>
<div class="line"><span class="lineno">  175</span><span class="stringliteral">        @param geometry_path: The path to the geometry file.</span></div>
<div class="line"><span class="lineno">  176</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  177</span>        <span class="keywordflow">if</span> camera_path:</div>
<div class="line"><span class="lineno">  178</span>            camera = stage.DefinePrim(root_path, <span class="stringliteral">&quot;Xform&quot;</span>)</div>
<div class="line"><span class="lineno">  179</span>            camera.GetReferences().AddReference(camera_path) </div>
<div class="line"><span class="lineno">  180</span>            <span class="keywordflow">return</span> camera</div>
<div class="line"><span class="lineno">  181</span>        </div>
<div class="line"><span class="lineno">  182</span>        <span class="comment"># Define the geometry path (e.g., a cube or any other geometry)</span></div>
<div class="line"><span class="lineno">  183</span>        geometry_path = Sdf.Path(geometry_path)</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>        <span class="comment"># Get the UsdPrim for the geometry</span></div>
<div class="line"><span class="lineno">  186</span>        geometry_prim = stage.GetPrimAtPath(geometry_path)</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>        camera_path = Sdf.Path(root_path)</div>
<div class="line"><span class="lineno">  189</span>        camera = UsdGeom.Camera.Define(stage, camera_path)</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>        <span class="comment"># Compute the world space bounding box of the geometry</span></div>
<div class="line"><span class="lineno">  192</span>        bbox_cache = UsdGeom.BBoxCache(Usd.TimeCode.Default(), [UsdGeom.Tokens.default_])</div>
<div class="line"><span class="lineno">  193</span>        bbox = bbox_cache.ComputeWorldBound(geometry_prim)</div>
<div class="line"><span class="lineno">  194</span>        bbox_range = bbox.ComputeAlignedRange()</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>        <span class="comment"># Get the center and size of the bounding box</span></div>
<div class="line"><span class="lineno">  197</span>        bbox_center = bbox_range.GetMidpoint()  <span class="comment"># This is a Gf.Vec3d</span></div>
<div class="line"><span class="lineno">  198</span>        bbox_size = bbox_range.GetSize()  <span class="comment"># This is a Gf.Vec3d</span></div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>        <span class="comment"># Position the camera to frame the bounding box</span></div>
<div class="line"><span class="lineno">  201</span>        <span class="comment"># Move the camera back along the Z-axis to fit the bounding box</span></div>
<div class="line"><span class="lineno">  202</span>        distance = max(bbox_size) * 1.5  <span class="comment"># Adjust the multiplier as needed</span></div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>        <span class="comment"># Convert bbox_center to Gf.Vec3f for compatibility with Gf.Vec3f(0, 0, distance)</span></div>
<div class="line"><span class="lineno">  205</span>        camera_position = Gf.Vec3f(bbox_center) + Gf.Vec3f(0, 0, distance)</div>
<div class="line"><span class="lineno">  206</span>        camera.AddTranslateOp().Set(camera_position)</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>        <span class="comment"># Orient the camera to look at the center of the bounding box</span></div>
<div class="line"><span class="lineno">  209</span>        camera.AddRotateYOp().Set(0)  <span class="comment"># Rotate to look along the -Z axis</span></div>
<div class="line"><span class="lineno">  210</span>        look_at = UsdGeom.XformCommonAPI(camera)</div>
<div class="line"><span class="lineno">  211</span>        look_at.SetRotate((0, 0, 0))  <span class="comment"># Ensure the camera is aligned</span></div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>        <span class="comment"># Adjust the camera&#39;s field of view to fit the bounding box</span></div>
<div class="line"><span class="lineno">  214</span>        focal_length = 35.0  <span class="comment"># Default focal length</span></div>
<div class="line"><span class="lineno">  215</span>        camera.GetFocalLengthAttr().Set(focal_length)</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>        <span class="comment"># Set the horizontal and vertical aperture to ensure proper framing</span></div>
<div class="line"><span class="lineno">  218</span>        horizontal_aperture = bbox_size[0] / bbox_size[1] * 20.0  <span class="comment"># Adjust based on aspect ratio</span></div>
<div class="line"><span class="lineno">  219</span>        vertical_aperture = horizontal_aperture</div>
<div class="line"><span class="lineno">  220</span>        camera.GetHorizontalApertureAttr().Set(horizontal_aperture)</div>
<div class="line"><span class="lineno">  221</span>        camera.GetVerticalApertureAttr().Set(vertical_aperture)</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>        <span class="comment"># Set the clipping range to include the bounding box</span></div>
<div class="line"><span class="lineno">  224</span>        near_clip = distance - max(bbox_size) * 0.5</div>
<div class="line"><span class="lineno">  225</span>        far_clip = distance + max(bbox_size) * 0.5</div>
<div class="line"><span class="lineno">  226</span>        camera.GetClippingRangeAttr().Set(Gf.Vec2f(near_clip, far_clip))</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>        <span class="comment">#camera.SetActive(True)</span></div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>        <span class="comment"># Save the USD stage        </span></div>
<div class="line"><span class="lineno">  231</span>        <span class="keywordflow">return</span> camera</div>
<div class="line"><span class="lineno">  232</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c356d76f17416877cb3dca7077db90d" name="a5c356d76f17416877cb3dca7077db90d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c356d76f17416877cb3dca7077db90d">&#9670;&#160;</a></span>add_geometry_reference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.add_geometry_reference </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Usd.Stage</td>          <td class="paramname"><span class="paramname"><em>stage</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>geometry_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>root_path</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;/TestScene/Geometry&quot;</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function adds a geometry reference to the stage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>The stage to add the geometry reference. </td></tr>
    <tr><td class="paramname">geometry_path</td><td>The path to the geometry file. </td></tr>
    <tr><td class="paramname">root_path</td><td>The root path to add the geometry reference. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00145">145</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  145</span>    <span class="keyword">def </span>add_geometry_reference(self, stage: Usd.Stage, geometry_path : str, root_path : str=<span class="stringliteral">&quot;/TestScene/Geometry&quot;</span>):</div>
<div class="line"><span class="lineno">  146</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  147</span><span class="stringliteral">        @brief This function adds a geometry reference to the stage.</span></div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral">        @param stage: The stage to add the geometry reference.</span></div>
<div class="line"><span class="lineno">  149</span><span class="stringliteral">        @param geometry_path: The path to the geometry file.</span></div>
<div class="line"><span class="lineno">  150</span><span class="stringliteral">        @param root_path: The root path to add the geometry reference.</span></div>
<div class="line"><span class="lineno">  151</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  152</span>        geom_prim = stage.DefinePrim(root_path, <span class="stringliteral">&quot;Xform&quot;</span>)        </div>
<div class="line"><span class="lineno">  153</span>        geom_prim.GetReferences().AddReference(geometry_path)</div>
<div class="line"><span class="lineno">  154</span>        <span class="keywordflow">return</span> geom_prim</div>
<div class="line"><span class="lineno">  155</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="a833cabcaa3a823ebd16c2e443341746c" name="a833cabcaa3a823ebd16c2e443341746c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a833cabcaa3a823ebd16c2e443341746c">&#9670;&#160;</a></span>add_skydome_light()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.add_skydome_light </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Usd.Stage</td>          <td class="paramname"><span class="paramname"><em>stage</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>environment_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str </td>          <td class="paramname"><span class="paramname"><em>root_path</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;/TestScene/Lights&quot;</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str </td>          <td class="paramname"><span class="paramname"><em>light_name</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;EnvironmentLight&quot;</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>xform_scale</em></span><span class="paramdefsep"> = </span><span class="paramdefval">Gf.Vec3f(1.3,&#160;1.3,&#160;1.3)</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>xform_rotate</em></span><span class="paramdefsep"> = </span><span class="paramdefval">Gf.Vec3f(0,&#160;0,&#160;0)</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function adds a skydome light to the stage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>The stage to add the skydome light. </td></tr>
    <tr><td class="paramname">environment_path</td><td>The path to the environment light file. </td></tr>
    <tr><td class="paramname">root_path</td><td>The root path to add the skydome light. </td></tr>
    <tr><td class="paramname">light_name</td><td>The name of the skydome light. </td></tr>
    <tr><td class="paramname">xform_scale</td><td>The scale of the skydome light. </td></tr>
    <tr><td class="paramname">xform_rotate</td><td>The rotation of the skydome light. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: The skydome light added to the stage. </dd></dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00102">102</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  102</span>    <span class="keyword">def </span>add_skydome_light(self, stage: Usd.Stage, environment_path:str, root_path:str = <span class="stringliteral">&quot;/TestScene/Lights&quot;</span>, light_name:str = <span class="stringliteral">&quot;EnvironmentLight&quot;</span>, xform_scale=Gf.Vec3f(1.3, 1.3, 1.3), xform_rotate=Gf.Vec3f(0, 0, 0)):</div>
<div class="line"><span class="lineno">  103</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  104</span><span class="stringliteral">        @brief This function adds a skydome light to the stage.</span></div>
<div class="line"><span class="lineno">  105</span><span class="stringliteral">        @param stage: The stage to add the skydome light.</span></div>
<div class="line"><span class="lineno">  106</span><span class="stringliteral">        @param environment_path: The path to the environment light file.</span></div>
<div class="line"><span class="lineno">  107</span><span class="stringliteral">        @param root_path: The root path to add the skydome light.</span></div>
<div class="line"><span class="lineno">  108</span><span class="stringliteral">        @param light_name: The name of the skydome light.</span></div>
<div class="line"><span class="lineno">  109</span><span class="stringliteral">        @param xform_scale: The scale of the skydome light.</span></div>
<div class="line"><span class="lineno">  110</span><span class="stringliteral">        @param xform_rotate: The rotation of the skydome light.</span></div>
<div class="line"><span class="lineno">  111</span><span class="stringliteral">        @return: The skydome light added to the stage.</span></div>
<div class="line"><span class="lineno">  112</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  113</span>        skydome_prim = stage.DefinePrim(root_path, <span class="stringliteral">&quot;Xform&quot;</span>)</div>
<div class="line"><span class="lineno">  114</span>        <span class="comment"># Make the skydome prim Xformable</span></div>
<div class="line"><span class="lineno">  115</span>        xformable = UsdGeom.Xformable(skydome_prim)</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>        <span class="comment"># Scale drawing of skydome</span></div>
<div class="line"><span class="lineno">  118</span>        scale_op = xformable.GetScaleOp()</div>
<div class="line"><span class="lineno">  119</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> scale_op:</div>
<div class="line"><span class="lineno">  120</span>            scale_op = xformable.AddScaleOp(UsdGeom.XformOp.PrecisionFloat)</div>
<div class="line"><span class="lineno">  121</span>        scale_value = xform_scale </div>
<div class="line"><span class="lineno">  122</span>        scale_op.Set(scale_value)</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>        dome_light = UsdLux.DomeLight.Define(stage, f<span class="stringliteral">&quot;{root_path}/{light_name}&quot;</span>)</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>        <span class="comment"># Set the attributes for the DomeLight</span></div>
<div class="line"><span class="lineno">  127</span>        dome_light.CreateIntensityAttr().Set(1.0)</div>
<div class="line"><span class="lineno">  128</span>        dome_light.CreateTextureFileAttr().Set(environment_path)</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>        <span class="comment"># Set guideRadius</span></div>
<div class="line"><span class="lineno">  131</span>        dome_light.CreateGuideRadiusAttr().Set(1.0)</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>        <span class="comment"># Rotate the light as needed.</span></div>
<div class="line"><span class="lineno">  134</span>        xformable = UsdGeom.Xformable(dome_light)</div>
<div class="line"><span class="lineno">  135</span>        xform_op = xformable.GetXformOp(UsdGeom.XformOp.TypeRotateXYZ)</div>
<div class="line"><span class="lineno">  136</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> xform_op:</div>
<div class="line"><span class="lineno">  137</span>            xform_op = xformable.AddXformOp(UsdGeom.XformOp.TypeRotateXYZ, UsdGeom.XformOp.PrecisionFloat)</div>
<div class="line"><span class="lineno">  138</span>        xform_op.Set(xform_rotate)</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>        <span class="comment"># Set the xformOpOrder</span></div>
<div class="line"><span class="lineno">  141</span>        xformable.SetXformOpOrder([xform_op])</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordflow">return</span> dome_light</div>
<div class="line"><span class="lineno">  144</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="af176d1262d255c76bed2f730ea94bd9c" name="af176d1262d255c76bed2f730ea94bd9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af176d1262d255c76bed2f730ea94bd9c">&#9670;&#160;</a></span>create_usdz_package()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.create_usdz_package </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>usdz_file_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>flattened_layer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function creates a new USDZ package from a flattened layer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">usdz_file_path</td><td>The path to the USDZ package to create. </td></tr>
    <tr><td class="paramname">flattened_layer</td><td>The flattened layer to save to the USDZ package. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: True if the USDZ package was successfully created, False otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00335">335</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  335</span>    <span class="keyword">def </span>create_usdz_package(self, usdz_file_path:str, flattened_layer):</div>
<div class="line"><span class="lineno">  336</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  337</span><span class="stringliteral">        @brief This function creates a new USDZ package from a flattened layer.</span></div>
<div class="line"><span class="lineno">  338</span><span class="stringliteral">        @param usdz_file_path: The path to the USDZ package to create.</span></div>
<div class="line"><span class="lineno">  339</span><span class="stringliteral">        @param flattened_layer: The flattened layer to save to the USDZ package.</span></div>
<div class="line"><span class="lineno">  340</span><span class="stringliteral">        @return: True if the USDZ package was successfully created, False otherwise.</span></div>
<div class="line"><span class="lineno">  341</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  342</span>        success = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  343</span>        error = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  344</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  345</span>            success = UsdUtils.CreateNewUsdzPackage(flattened_layer.identifier, usdz_file_path)</div>
<div class="line"><span class="lineno">  346</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> success:</div>
<div class="line"><span class="lineno">  347</span>                error = (<span class="stringliteral">&quot;Failed to create USDZ package.&quot;</span>)</div>
<div class="line"><span class="lineno">  348</span>        <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  349</span>            error = (f<span class="stringliteral">&quot;An exception occurred while creating the USDZ file: {e}&quot;</span>)</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>        <span class="keywordflow">return</span> success, error    </div>
<div class="line"><span class="lineno">  352</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e96939fa66d8f77d10e2dc02871d757" name="a8e96939fa66d8f77d10e2dc02871d757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e96939fa66d8f77d10e2dc02871d757">&#9670;&#160;</a></span>find_first_camera()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.find_first_camera </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Usd.Stage</td>          <td class="paramname"><span class="paramname"><em>stage</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function finds the first camera in the stage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>The stage to search for the first camera. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: The first camera found in the stage. If no camera is found, None is returned. </dd></dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00156">156</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  156</span>    <span class="keyword">def </span>find_first_camera(self, stage : Usd.Stage):</div>
<div class="line"><span class="lineno">  157</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  158</span><span class="stringliteral">        @brief This function finds the first camera in the stage.</span></div>
<div class="line"><span class="lineno">  159</span><span class="stringliteral">        @param stage: The stage to search for the first camera.</span></div>
<div class="line"><span class="lineno">  160</span><span class="stringliteral">        @return: The first camera found in the stage. If no camera is found, None is returned.</span></div>
<div class="line"><span class="lineno">  161</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  162</span>        <span class="comment"># Traverse the stage&#39;s prims</span></div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">for</span> prim <span class="keywordflow">in</span> stage.Traverse():</div>
<div class="line"><span class="lineno">  164</span>            <span class="comment"># Check if the prim is a UsdGeomCamera</span></div>
<div class="line"><span class="lineno">  165</span>            <span class="keywordflow">if</span> prim.IsA(UsdGeom.Camera):</div>
<div class="line"><span class="lineno">  166</span>                <span class="keywordflow">return</span> prim</div>
<div class="line"><span class="lineno">  167</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  168</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="a90b0c3056c24a712ed514d7aa4f19996" name="a90b0c3056c24a712ed514d7aa4f19996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90b0c3056c24a712ed514d7aa4f19996">&#9670;&#160;</a></span>find_first_valid_prim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.find_first_valid_prim </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stage</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function finds the first valid prim in root layer of a stage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>The stage to search for the first valid prim. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: The first valid prim found in the stage. If no valid prim is found, None is returned. </dd></dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00045">45</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   45</span>    <span class="keyword">def </span>find_first_valid_prim(self, stage):</div>
<div class="line"><span class="lineno">   46</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral">        @brief This function finds the first valid prim in root layer of a stage.</span></div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">        @param stage: The stage to search for the first valid prim.</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral">        @return: The first valid prim found in the stage. If no valid prim is found, None is returned.</span></div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   51</span>        <span class="comment"># Get the root layer of the stage</span></div>
<div class="line"><span class="lineno">   52</span>        root_layer = stage.GetRootLayer()</div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span>        <span class="comment"># Find first valid prim </span></div>
<div class="line"><span class="lineno">   55</span>        first_prim = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   56</span>        <span class="keywordflow">for</span> prim <span class="keywordflow">in</span> stage.Traverse():</div>
<div class="line"><span class="lineno">   57</span>            <span class="keywordflow">if</span> prim.IsValid():</div>
<div class="line"><span class="lineno">   58</span>                first_prim = prim</div>
<div class="line"><span class="lineno">   59</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">   60</span>            </div>
<div class="line"><span class="lineno">   61</span>        <span class="keywordflow">return</span> first_prim</div>
<div class="line"><span class="lineno">   62</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a79421701c56fa9c33ba70216fc02c0fe" name="a79421701c56fa9c33ba70216fc02c0fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79421701c56fa9c33ba70216fc02c0fe">&#9670;&#160;</a></span>find_materials()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.find_materials </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stage</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>find_first</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function finds the first material in the stage. </p>
<p>Assumes MaterialX materials are stored under the "/MaterialX/Materials" scope. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>The stage to search for the first material. </td></tr>
    <tr><td class="paramname">find_first</td><td>If True, only the first material found is returned. Default is True. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: The first material found in the stage. If no material is found, None is returned. </dd></dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00073">73</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   73</span>    <span class="keyword">def </span>find_materials(self, stage, find_first:bool=<span class="keyword">True</span>):</div>
<div class="line"><span class="lineno">   74</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral">        @brief This function finds the first material in the stage. Assumes MaterialX</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">        materials are stored under the &quot;/MaterialX/Materials&quot; scope.</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">        @param stage: The stage to search for the first material.</span></div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">        @param find_first: If True, only the first material found is returned. Default is True.</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">        @return: The first material found in the stage. If no material is found, None is returned.</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   81</span>        found_materials = []</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>        <span class="comment"># Find the first material under the &quot;MaterialX/Materials&quot; scope</span></div>
<div class="line"><span class="lineno">   84</span>        materialx_prim = stage.GetPrimAtPath(<span class="stringliteral">&quot;/MaterialX&quot;</span>)</div>
<div class="line"><span class="lineno">   85</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> materialx_prim:</div>
<div class="line"><span class="lineno">   86</span>            self.logger.info(<span class="stringliteral">&quot;&gt; Warning: Could not find /MaterialX scope in the USDA file.&quot;</span>)</div>
<div class="line"><span class="lineno">   87</span>            <span class="keywordflow">return</span> found_materials</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>        materials_prim = materialx_prim.GetPrimAtPath(<span class="stringliteral">&quot;Materials&quot;</span>)</div>
<div class="line"><span class="lineno">   90</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> materials_prim:</div>
<div class="line"><span class="lineno">   91</span>            self.logger.info(<span class="stringliteral">&quot;&gt; Warning: Could not find /MaterialX/Materials scope in the USDA file.&quot;</span>)</div>
<div class="line"><span class="lineno">   92</span>            <span class="keywordflow">return</span> found_materials</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>        <span class="keywordflow">for</span> child_prim <span class="keywordflow">in</span> materials_prim.GetAllChildren():</div>
<div class="line"><span class="lineno">   95</span>            <span class="keywordflow">if</span> child_prim.GetTypeName() == <span class="stringliteral">&quot;Material&quot;</span>:</div>
<div class="line"><span class="lineno">   96</span>                found_materials.append(child_prim)</div>
<div class="line"><span class="lineno">   97</span>                <span class="keywordflow">if</span> find_first:</div>
<div class="line"><span class="lineno">   98</span>                    <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">return</span> found_materials</div>
<div class="line"><span class="lineno">  101</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="aea23f4b712b09be585b1b89fa6673708" name="aea23f4b712b09be585b1b89fa6673708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea23f4b712b09be585b1b89fa6673708">&#9670;&#160;</a></span>get_flattend_layer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.get_flattend_layer </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stage</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function flattens the stage and returns the flattened layer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>The stage to flatten. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: The flattened layer. </dd></dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00316">316</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  316</span>    <span class="keyword">def </span>get_flattend_layer(self, stage):</div>
<div class="line"><span class="lineno">  317</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  318</span><span class="stringliteral">        @brief This function flattens the stage and returns the flattened layer.</span></div>
<div class="line"><span class="lineno">  319</span><span class="stringliteral">        @param stage: The stage to flatten.</span></div>
<div class="line"><span class="lineno">  320</span><span class="stringliteral">        @return: The flattened layer.</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  322</span>        <span class="keywordflow">return</span> stage.Flatten()</div>
<div class="line"><span class="lineno">  323</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="a009b7c605943400283e61ef9345023f8" name="a009b7c605943400283e61ef9345023f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a009b7c605943400283e61ef9345023f8">&#9670;&#160;</a></span>mtlx_to_usd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.mtlx_to_usd </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>input_usd_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>shaderball_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>environment_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>material_file_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>camera_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>use_custom</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function reads the input usd file and adds the shaderball geometry and environment light to the scene. </p>
<p>It also binds the first material to the shaderball geometry. The final stage is returned. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input_usd_path</td><td>Path to the input usd file </td></tr>
    <tr><td class="paramname">shaderball_path</td><td>Path to the shaderball geometry file </td></tr>
    <tr><td class="paramname">environment_path</td><td>Path to the environment light file </td></tr>
    <tr><td class="paramname">material_file_path</td><td>Path to the material file. If specified will save the material file. </td></tr>
    <tr><td class="paramname">camera_path</td><td>Path to the camera file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: The final stage with all the elements added </dd></dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00233">233</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  234</span>                    use_custom=<span class="keyword">False</span>):</div>
<div class="line"><span class="lineno">  235</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  236</span><span class="stringliteral">        @brief This function reads the input usd file and adds the shaderball geometry and environment light</span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">        to the scene. It also binds the first material to the shaderball geometry. The final stage is returned.</span></div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral">        @param input_usd_path: Path to the input usd file</span></div>
<div class="line"><span class="lineno">  239</span><span class="stringliteral">        @param shaderball_path: Path to the shaderball geometry file</span></div>
<div class="line"><span class="lineno">  240</span><span class="stringliteral">        @param environment_path: Path to the environment light file</span></div>
<div class="line"><span class="lineno">  241</span><span class="stringliteral">        @param material_file_path: Path to the material file. If specified will save the material file.</span></div>
<div class="line"><span class="lineno">  242</span><span class="stringliteral">        @param camera_path: Path to the camera file</span></div>
<div class="line"><span class="lineno">  243</span><span class="stringliteral">        @return: The final stage with all the elements added</span></div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  245</span>        <span class="comment"># Open the input USDA file</span></div>
<div class="line"><span class="lineno">  246</span>        stage = <span class="keywordtype">None</span> </div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>        <span class="keywordflow">if</span> use_custom:</div>
<div class="line"><span class="lineno">  249</span>            mtlx_to_usd = mxcust.MtlxToUsd(self.logger)</div>
<div class="line"><span class="lineno">  250</span>            stage = mtlx_to_usd.emit(input_usd_path, <span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  251</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  252</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  253</span>                stage = Usd.Stage.Open(input_usd_path)</div>
<div class="line"><span class="lineno">  254</span>            <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  255</span>                self.logger.info(f<span class="stringliteral">&quot;&gt; Error: Could not open file at {input_usd_path}. Error: {e}&quot;</span>)</div>
<div class="line"><span class="lineno">  256</span>                <span class="keywordflow">return</span> stage, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  257</span>        </div>
<div class="line"><span class="lineno">  258</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> stage:</div>
<div class="line"><span class="lineno">  259</span>            self.logger.info(f<span class="stringliteral">&quot;&gt; Error: Could not open file at {input_usd_path}&quot;</span>)</div>
<div class="line"><span class="lineno">  260</span>            <span class="keywordflow">return</span> stage, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  261</span>        </div>
<div class="line"><span class="lineno">  262</span>        <span class="comment"># Set the required validation attributes</span></div>
<div class="line"><span class="lineno">  263</span>        self.set_required_validation_attributes(stage)</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>        <span class="keywordflow">if</span> material_file_path:</div>
<div class="line"><span class="lineno">  266</span>            <span class="comment"># Save the material file</span></div>
<div class="line"><span class="lineno">  267</span>            self.logger.info(f<span class="stringliteral">&quot;&gt; Saving MaterialX content to: {material_file_path}&quot;</span>)</div>
<div class="line"><span class="lineno">  268</span>            stage.GetRootLayer().documentation = f<span class="stringliteral">&quot;MaterialX content from {input_usd_path}&quot;</span></div>
<div class="line"><span class="lineno">  269</span>            stage.GetRootLayer().Export(material_file_path)</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>        found_materials = self.find_materials(stage, <span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  272</span>        <span class="comment">#if not found_materials:</span></div>
<div class="line"><span class="lineno">  273</span>        <span class="comment">#    self.logger.info(&quot;Warning: No materials found under /MaterialX/Materials.&quot;)</span></div>
<div class="line"><span class="lineno">  274</span>            <span class="comment">#return stage, found_materials, None, None, None</span></div>
<div class="line"><span class="lineno">  275</span>        first_material = found_materials[0] <span class="keywordflow">if</span> found_materials <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>        <span class="comment"># TODO: Make this a user option...</span></div>
<div class="line"><span class="lineno">  278</span>        SCENE_ROOT = <span class="stringliteral">&quot;/TestScene&quot;</span></div>
<div class="line"><span class="lineno">  279</span>        GEOM_ROOT = <span class="stringliteral">&quot;/TestScene/Geometry&quot;</span></div>
<div class="line"><span class="lineno">  280</span>        LIGHTS_ROOT = <span class="stringliteral">&quot;/TestScene/Lights&quot;</span></div>
<div class="line"><span class="lineno">  281</span>        SKYDOME_LIGHT_NAME = <span class="stringliteral">&quot;EnvironmentLight&quot;</span></div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>        <span class="comment"># Define the scene prim</span></div>
<div class="line"><span class="lineno">  284</span>        test_scene_prim = stage.DefinePrim(SCENE_ROOT, <span class="stringliteral">&quot;Xform&quot;</span>)</div>
<div class="line"><span class="lineno">  285</span>        <span class="comment"># - Specify a default prim for validation</span></div>
<div class="line"><span class="lineno">  286</span>        stage.SetDefaultPrim(stage.GetPrimAtPath(SCENE_ROOT))</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span>        <span class="comment"># - Add geometry reference</span></div>
<div class="line"><span class="lineno">  289</span>        test_geom_prim = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  290</span>        <span class="keywordflow">if</span> shaderball_path:</div>
<div class="line"><span class="lineno">  291</span>            test_geom_prim = self.add_geometry_reference(stage, shaderball_path, GEOM_ROOT)</div>
<div class="line"><span class="lineno">  292</span>            <span class="keywordflow">if</span> test_geom_prim <span class="keywordflow">and</span> first_material:</div>
<div class="line"><span class="lineno">  293</span>                material_binding_api = UsdShade.MaterialBindingAPI.Apply(test_geom_prim)</div>
<div class="line"><span class="lineno">  294</span>                material_binding_api.Bind(UsdShade.Material(first_material))</div>
<div class="line"><span class="lineno">  295</span>                self.logger.info(f<span class="stringliteral">&quot;&gt; Geometry reference &#39;{shaderball_path} added under: {test_scene_prim.GetPath()}.&quot;</span>)</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>        <span class="comment"># Add lighting with reference to light environment file</span></div>
<div class="line"><span class="lineno">  298</span>        <span class="comment"># -----------------------------------------</span></div>
<div class="line"><span class="lineno">  299</span>        dome_light = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  300</span>        <span class="keywordflow">if</span> environment_path:</div>
<div class="line"><span class="lineno">  301</span>            dome_light = self.add_skydome_light(stage, environment_path, LIGHTS_ROOT, SKYDOME_LIGHT_NAME)</div>
<div class="line"><span class="lineno">  302</span>            <span class="keywordflow">if</span> dome_light:</div>
<div class="line"><span class="lineno">  303</span>                self.logger.info(f<span class="stringliteral">&quot;&gt; Light &#39;{environment_path}&#39; added at path: {dome_light.GetPath()}.&quot;</span>)</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>        <span class="comment"># Add camera reference</span></div>
<div class="line"><span class="lineno">  306</span>        <span class="comment"># -----------------------------------------</span></div>
<div class="line"><span class="lineno">  307</span>        camera_prim = self.add_camera(stage, camera_path)</div>
<div class="line"><span class="lineno">  308</span>        <span class="keywordflow">if</span> camera_prim:</div>
<div class="line"><span class="lineno">  309</span>            <span class="keywordflow">if</span> camera_path:</div>
<div class="line"><span class="lineno">  310</span>                self.logger.info(f<span class="stringliteral">&quot;&gt; Camera &#39;{camera_path}&#39; added at path: {camera_prim.GetPath()}.&quot;</span>)</div>
<div class="line"><span class="lineno">  311</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  312</span>                self.logger.info(f<span class="stringliteral">&quot;&gt; Camera added at path: {camera_prim.GetPath()}.&quot;</span>)</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">return</span> stage, found_materials, test_geom_prim, dome_light, camera_prim</div>
<div class="line"><span class="lineno">  315</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="add4df306e35bed3c2426d6320fd6dae3" name="add4df306e35bed3c2426d6320fd6dae3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add4df306e35bed3c2426d6320fd6dae3">&#9670;&#160;</a></span>save_flattened_layer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.save_flattened_layer </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>flattened_layer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>output_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function saves the flattened stage to a new USD file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flattened_layer</td><td>The flattened layer to save. </td></tr>
    <tr><td class="paramname">output_path</td><td>The path to save the flattened stage. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00324">324</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  324</span>    <span class="keyword">def </span>save_flattened_layer(self, flattened_layer, output_path:str):</div>
<div class="line"><span class="lineno">  325</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  326</span><span class="stringliteral">        @brief This function saves the flattened stage to a new USD file.</span></div>
<div class="line"><span class="lineno">  327</span><span class="stringliteral">        @param flattened_layer: The flattened layer to save.</span></div>
<div class="line"><span class="lineno">  328</span><span class="stringliteral">        @param output_path: The path to save the flattened stage.</span></div>
<div class="line"><span class="lineno">  329</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  330</span>        flatten_path = output_path.replace(<span class="stringliteral">&quot;.usda&quot;</span>, <span class="stringliteral">&quot;_flattened.usda&quot;</span>)</div>
<div class="line"><span class="lineno">  331</span>        flattened_layer.documentation = f<span class="stringliteral">&quot;Flattened USD file for {output_path}&quot;</span></div>
<div class="line"><span class="lineno">  332</span>        flattened_layer.Export(flatten_path)</div>
<div class="line"><span class="lineno">  333</span>        <span class="keywordflow">return</span> flatten_path</div>
<div class="line"><span class="lineno">  334</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="a507d4538ab4857fc3500e2820caf953f" name="a507d4538ab4857fc3500e2820caf953f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a507d4538ab4857fc3500e2820caf953f">&#9670;&#160;</a></span>set_required_validation_attributes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.set_required_validation_attributes </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stage</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets the required validation attributes for the stage. </p>
<p>For now this function sets the upAxis and metersPerUnit. to Y and 1.0 respectively. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>The stage to set the required validation attributes. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00063">63</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   63</span>    <span class="keyword">def </span>set_required_validation_attributes(self, stage):</div>
<div class="line"><span class="lineno">   64</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   65</span><span class="stringliteral">        @brief This function sets the required validation attributes for the stage.</span></div>
<div class="line"><span class="lineno">   66</span><span class="stringliteral">        For now this function sets the upAxis and metersPerUnit. to Y and 1.0 respectively.</span></div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral">        @param stage: The stage to set the required validation attributes.</span></div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   69</span>        <span class="comment"># Set the upAxis and metersPerUnit for validation</span></div>
<div class="line"><span class="lineno">   70</span>        UsdGeom.SetStageUpAxis(stage, UsdGeom.Tokens.y)</div>
<div class="line"><span class="lineno">   71</span>        UsdGeom.SetStageMetersPerUnit(stage, 1.0)</div>
<div class="line"><span class="lineno">   72</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aca957fa79bf2d7423c686e85a4269fbf" name="aca957fa79bf2d7423c686e85a4269fbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca957fa79bf2d7423c686e85a4269fbf">&#9670;&#160;</a></span>validate_stage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.validate_stage </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>verboseOutput</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function validates a USD file using the ComplianceChecker. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>The path to the USD file to validate. </td></tr>
    <tr><td class="paramname">verboseOutput</td><td>If True, the compliance check will output verbose information. Default is False. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: A tuple containing the errors, warnings, and failed checks. </dd></dl>

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00022">22</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   22</span>    <span class="keyword">def </span>validate_stage(self, file:str, verboseOutput:bool=<span class="keyword">False</span>):</div>
<div class="line"><span class="lineno">   23</span>        <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   24</span><span class="stringliteral">        @brief This function validates a USD file using the ComplianceChecker.</span></div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral">        @param file: The path to the USD file to validate.</span></div>
<div class="line"><span class="lineno">   26</span><span class="stringliteral">        @param verboseOutput: If True, the compliance check will output verbose information. Default is False.</span></div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral">        @return: A tuple containing the errors, warnings, and failed checks.</span></div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   29</span>        <span class="comment"># Set up a ComplianceChecker</span></div>
<div class="line"><span class="lineno">   30</span>        compliance_checker = UsdUtils.ComplianceChecker(</div>
<div class="line"><span class="lineno">   31</span>            rootPackageOnly=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">   32</span>            skipVariants=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">   33</span>            verbose=verboseOutput  </div>
<div class="line"><span class="lineno">   34</span>        )</div>
<div class="line"><span class="lineno">   35</span> </div>
<div class="line"><span class="lineno">   36</span>        <span class="comment"># Run the compliance check</span></div>
<div class="line"><span class="lineno">   37</span>        compliance_checker.CheckCompliance(file)</div>
<div class="line"><span class="lineno">   38</span> </div>
<div class="line"><span class="lineno">   39</span>        <span class="comment"># Get the results of the compliance check</span></div>
<div class="line"><span class="lineno">   40</span>        errors = compliance_checker.GetErrors()</div>
<div class="line"><span class="lineno">   41</span>        warnings = compliance_checker.GetWarnings()</div>
<div class="line"><span class="lineno">   42</span>        failed_checks = compliance_checker.GetFailedChecks()</div>
<div class="line"><span class="lineno">   43</span>        <span class="keywordflow">return</span> errors, warnings, failed_checks</div>
<div class="line"><span class="lineno">   44</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a0f563d0e77dc301cafd4073087c013dd" name="a0f563d0e77dc301cafd4073087c013dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f563d0e77dc301cafd4073087c013dd">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">source.materialxusd.materialxusd.MaterialxUSDConverter.logger = logging.getLogger('MX2USD')</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="materialxusd_8py_source.html#l00019">19</a> of file <a class="el" href="materialxusd_8py_source.html">materialxusd.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="materialxusd_8py_source.html">materialxusd.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li>
      <button class="btn btn-outline" type="button">
        <a href="https://github.com/kwokcb/materialxusd" target="_blank"><b class="fa-brands fa-github fa-1x"
            style="color: #ffffff;"></b></a>
      </button>
      <button class="btn btn-outline " type="button">
        <a href="https://www.linkedin.com/in/bernard-kwok/" target="_blank"><b class="fa-brands fa-linkedin-in fa-1x"
            style="color: #0082ca;"></b></a>
      </button>
    </li>
    <li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
        <img alt="Creative Commons License" style="border-width:0; width: 48px"
          src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
    </li>
    </a>
    <li><a href="https://kwokcb.github.io/nanmuconsulting/" target="_blank" style="color: #333; text-decoration: none;">
        &copy; 2022-2025 NanMu Consulting.
      </a>
    </li>
  </ul>
</div>
<!-- Bootstrap JS (Optional) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
